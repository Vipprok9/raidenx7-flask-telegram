<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RaidenX7 ‚Ä¢ Web Chat ‚Üí Telegram</title>
  <style>
    :root{color-scheme:dark light}
    body{font-family:system-ui,Arial,sans-serif;max-width:820px;margin:0 auto;padding:24px}
    h1{margin:0 0 8px}
    #box{border:1px solid #ddd;border-radius:12px;min-height:300px;max-height:60vh;overflow:auto;padding:12px;background:#fafafa}
    .msg{margin:8px 0;padding:10px 14px;border-radius:12px;max-width:80%;line-height:1.45}
    .me{background:#dbeafe;align-self:flex-end}
    .bot{background:#f3f4f6}
    .row{display:flex;gap:8px;margin-top:12px}
    input{flex:1;padding:12px;border:1px solid #ddd;border-radius:10px}
    button{padding:12px 16px;border:0;border-radius:10px;cursor:pointer;background:#111827;color:#fff}
    #status{font-size:13px;opacity:.7;margin-top:8px}
    .wrap{display:flex;flex-direction:column}
  </style>
</head>
<body>
  <h1>Web Chat ‚Üí Telegram (auto-reply)</h1>
  <p>Nh·∫≠p c√¢u h·ªèi, bot s·∫Ω g·ª≠i sang Telegram & tr·∫£ l·ªùi t·ª©c th√¨ v·ªõi c√°c c√¢u c∆° b·∫£n.</p>

  <div id="box" class="wrap"></div>

  <div class="row">
    <input id="msg" placeholder="Nh·∫≠p tin nh·∫Øn‚Ä¶ (vd: hello, ai, token, defi, airdrop, node, depin, tin t·ª©c, gi√°)">
    <button id="send">G·ª≠i</button>
  </div>
  <div id="status"></div>

  <script>
    // === CH·ªà S·ª¨A D√íNG N√ÄY N·∫æU C·∫¶N ===
    // N·∫øu front-end ch·∫°y ·ªü Cloudflare Pages, h√£y d√πng full URL Render nh∆∞ d∆∞·ªõi:
    const API = "https://raidenx7-flask-telegram.onrender.com/webchat";
    // N·∫øu m·ªü tr·ª±c ti·∫øp trang t·ª´ Render (c√πng domain), b·∫°n c√≥ th·ªÉ ƒë·ªïi th√†nh: const API = "/webchat";

    const box = document.getElementById('box');
    const input = document.getElementById('msg');
    const btn = document.getElementById('send');
    const statusEl = document.getElementById('status');

    function add(side, text){
      const d=document.createElement('div');
      d.className='msg ' + (side==='me'?'me':'bot');
      d.textContent=text;
      box.appendChild(d);
      box.scrollTop = box.scrollHeight;
    }

    function setStatus(t){ statusEl.textContent = t || "" }

    async function send(){
      const text = (input.value || "").trim();
      if(!text) return;
      add('me', text);
      input.value = "";
      setStatus("ƒêang g·ª≠i‚Ä¶");
      try{
        const r = await fetch(API, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ text })
        });
        const data = await r.json();
        add('bot', data.reply || "Kh√¥ng nh·∫≠n ƒë∆∞·ª£c tr·∫£ l·ªùi.");
        setStatus("");
      }catch(e){
        add('bot', "L·ªói k·∫øt n·ªëi API. H√£y th·ª≠ l·∫°i.");
        setStatus("");
      }
    }

    btn.onclick = send;
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') send();
    });

    // ch√†o nh·∫π
    add('bot', 'Xin ch√†o üëã M√¨nh l√† bot tr·ª£ l√Ω. B·∫°n c√≥ th·ªÉ th·ª≠: "hello", "ai", "token", "depin", "tin t·ª©c", "gi√°"‚Ä¶');
  </script>
</body>
</html>
